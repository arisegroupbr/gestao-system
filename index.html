<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema de Gest√£o de Produtos</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- React -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    
    <!-- Babel for JSX -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <style>
        /* Loading spinner */
        .loading {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            font-family: Arial, sans-serif;
        }
        
        .spinner {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #3498db;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 2s linear infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        /* Custom styles */
        .select-none {
            user-select: none;
        }
        
        .sticky {
            position: sticky;
        }
        
        .max-h-600 {
            max-height: 600px;
        }
        
        .max-h-80vh {
            max-height: 80vh;
        }
        
        .z-10 {
            z-index: 10;
        }
        
        .z-50 {
            z-index: 50;
        }
        
        /* Scrollbar styling */
        .overflow-y-auto::-webkit-scrollbar {
            width: 8px;
        }
        
        .overflow-y-auto::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 4px;
        }
        
        .overflow-y-auto::-webkit-scrollbar-thumb {
            background: #c1c1c1;
            border-radius: 4px;
        }
        
        .overflow-y-auto::-webkit-scrollbar-thumb:hover {
            background: #a8a8a8;
        }

        /* Icon styles */
        .icon {
            display: inline-block;
            width: 1rem;
            height: 1rem;
            vertical-align: middle;
        }
        
        .icon-lg {
            width: 2rem;
            height: 2rem;
        }
    </style>
</head>
<body>
    <div id="root">
        <div class="loading">
            <div>
                <div class="spinner"></div>
                <p style="margin-top: 20px; color: #666;">Carregando Sistema de Gest√£o de Produtos...</p>
            </div>
        </div>
    </div>

    <script type="text/babel">
        // Aguardar carregamento das depend√™ncias
        function verificarDependencias() {
            return new Promise((resolve) => {
                let tentativas = 0;
                const maxTentativas = 50;
                
                const verificar = () => {
                    tentativas++;
                    
                    if (window.React && window.ReactDOM && window.Babel) {
                        resolve(true);
                    } else if (tentativas < maxTentativas) {
                        setTimeout(verificar, 100);
                    } else {
                        resolve(false);
                    }
                };
                
                verificar();
            });
        }

        // Componentes de √≠cones simples
        const Icon = ({ type, className = "icon", ...props }) => {
            const icons = {
                package: "üì¶",
                upload: "‚¨ÜÔ∏è",
                plus: "‚ûï",
                trash: "üóëÔ∏è",
                eye: "üëÅÔ∏è",
                close: "‚ùå",
                filter: "üîç",
                history: "üìú",
                refresh: "üîÑ",
                search: "üîç",
                download: "‚¨áÔ∏è",
                check: "‚úÖ",
                alert: "‚ö†Ô∏è",
                file: "üìÑ"
            };
            
            return React.createElement('span', {
                className: className,
                ...props
            }, icons[type] || "‚Ä¢");
        };

        verificarDependencias().then((sucesso) => {
            if (!sucesso) {
                document.getElementById('root').innerHTML = `
                    <div style="padding: 20px; text-align: center; font-family: Arial, sans-serif;">
                        <h2 style="color: #e74c3c;">Erro ao Carregar Depend√™ncias</h2>
                        <p>Algumas bibliotecas n√£o puderam ser carregadas. Verifique sua conex√£o com a internet.</p>
                        <button onclick="location.reload()" style="margin-top: 20px; padding: 10px 20px; background: #3498db; color: white; border: none; border-radius: 5px; cursor: pointer;">
                            Tentar Novamente
                        </button>
                    </div>
                `;
                return;
            }

            const { useState, useRef } = React;
            const { createRoot } = ReactDOM;

            const SistemaImportacaoProdutos = () => {
                const [produtos, setProdutos] = useState([
                    { id: 1, nome: 'Notebook Dell Inspiron 15 3000 Intel Core i5 8GB RAM 256GB SSD', categoria: 'Eletr√¥nicos', quantidade: 5, unidade: 'un', minimo: 2, ideal: 10, isNew: false, isUpdated: false },
                    { id: 2, nome: 'Caneta Esferogr√°fica Bic Cristal Azul Caixa com 50 unidades', categoria: 'Escrit√≥rio', quantidade: 50, unidade: 'un', minimo: 20, ideal: 100, isNew: false, isUpdated: false },
                    { id: 3, nome: 'Papel Sulfite A4 75g Pacote com 500 folhas Marca Report', categoria: 'Escrit√≥rio', quantidade: 15, unidade: 'pct', minimo: 10, ideal: 30, isNew: false, isUpdated: false }
                ]);
                
                const [showImport, setShowImport] = useState(false);
                const [importType, setImportType] = useState('quantidade');
                const [dragActive, setDragActive] = useState(false);
                const [showProductModal, setShowProductModal] = useState(false);
                const [selectedProduct, setSelectedProduct] = useState(null);
                const [filtroStatus, setFiltroStatus] = useState('todos');
                const [showImportHistory, setShowImportHistory] = useState(false);
                const [ultimaImportacao, setUltimaImportacao] = useState(null);
                const [paginaAtual, setPaginaAtual] = useState(1);
                const [produtosPorPagina] = useState(30);
                const [termoBusca, setTermoBusca] = useState('');
                const [filtroCategoria, setFiltroCategoria] = useState('todas');
                const [ordenacao, setOrdenacao] = useState({ campo: 'nome', direcao: 'asc' });
                const fileInputRef = useRef(null);

                // Fun√ß√£o para normalizar nome do produto
                const normalizarNome = (nome) => {
                    return nome.toLowerCase()
                        .replace(/\s+/g, '')
                        .replace(/[^\w]/g, '')
                        .trim();
                };

                // Fun√ß√£o para encontrar produto existente
                const encontrarProdutoExistente = (nomeProduto, listaProdutos) => {
                    const nomeNormalizado = normalizarNome(nomeProduto);
                    
                    return listaProdutos.find(p => {
                        const produtoNormalizado = normalizarNome(p.nome);
                        
                        if (produtoNormalizado === nomeNormalizado) {
                            return true;
                        }
                        
                        return produtoNormalizado.includes(nomeNormalizado) || 
                               nomeNormalizado.includes(produtoNormalizado);
                    });
                };

                // Fun√ß√£o para obter categorias √∫nicas
                const obterCategorias = () => {
                    const categorias = [...new Set(produtos.map(p => p.categoria))];
                    return categorias.sort();
                };

                // Fun√ß√£o para ordenar produtos
                const ordenarProdutos = (produtosList) => {
                    return [...produtosList].sort((a, b) => {
                        let valorA = a[ordenacao.campo];
                        let valorB = b[ordenacao.campo];
                        
                        if (ordenacao.campo === 'quantidade' || ordenacao.campo === 'minimo' || ordenacao.campo === 'ideal') {
                            valorA = Number(valorA) || 0;
                            valorB = Number(valorB) || 0;
                        } else {
                            valorA = String(valorA).toLowerCase();
                            valorB = String(valorB).toLowerCase();
                        }
                        
                        if (valorA < valorB) {
                            return ordenacao.direcao === 'asc' ? -1 : 1;
                        }
                        if (valorA > valorB) {
                            return ordenacao.direcao === 'asc' ? 1 : -1;
                        }
                        return 0;
                    });
                };

                // Fun√ß√£o para alternar ordena√ß√£o
                const alternarOrdenacao = (campo) => {
                    setOrdenacao(prev => ({
                        campo,
                        direcao: prev.campo === campo && prev.direcao === 'asc' ? 'desc' : 'asc'
                    }));
                    setPaginaAtual(1);
                };

                // Fun√ß√£o para obter √≠cone de ordena√ß√£o
                const obterIconeOrdenacao = (campo) => {
                    if (ordenacao.campo !== campo) {
                        return '‚ÜïÔ∏è';
                    }
                    return ordenacao.direcao === 'asc' ? '‚Üë' : '‚Üì';
                };

                // Fun√ß√£o para obter status do produto
                const obterStatusDetalhado = (produto) => {
                    if (produto.quantidade <= produto.minimo) {
                        return {
                            categoria: 'critico',
                            texto: 'Cr√≠tico',
                            cor: 'text-red-500',
                            debug: `${produto.quantidade} <= ${produto.minimo}`
                        };
                    } else if (produto.quantidade < produto.ideal) {
                        return {
                            categoria: 'baixo',
                            texto: 'Baixo',
                            cor: 'text-yellow-500',
                            debug: `${produto.minimo} < ${produto.quantidade} < ${produto.ideal}`
                        };
                    } else {
                        return {
                            categoria: 'ideal',
                            texto: 'OK',
                            cor: 'text-green-500',
                            debug: `${produto.quantidade} >= ${produto.ideal}`
                        };
                    }
                };

                // Fun√ß√£o para filtrar produtos
                const filtrarProdutos = () => {
                    let produtosFiltrados = produtos;
                    
                    if (termoBusca.trim()) {
                        const termoLower = termoBusca.toLowerCase();
                        produtosFiltrados = produtosFiltrados.filter(p => 
                            p.nome.toLowerCase().includes(termoLower) ||
                            p.categoria.toLowerCase().includes(termoLower)
                        );
                    }
                    
                    if (filtroCategoria !== 'todas') {
                        produtosFiltrados = produtosFiltrados.filter(p => p.categoria === filtroCategoria);
                    }
                    
                    switch (filtroStatus) {
                        case 'critico':
                            produtosFiltrados = produtosFiltrados.filter(p => {
                                const status = obterStatusDetalhado(p);
                                return status.categoria === 'critico';
                            });
                            break;
                        case 'baixo':
                            produtosFiltrados = produtosFiltrados.filter(p => {
                                const status = obterStatusDetalhado(p);
                                return status.categoria === 'baixo';
                            });
                            break;
                        case 'ideal':
                            produtosFiltrados = produtosFiltrados.filter(p => {
                                const status = obterStatusDetalhado(p);
                                return status.categoria === 'ideal';
                            });
                            break;
                        case 'novos':
                            produtosFiltrados = produtosFiltrados.filter(p => p.isNew);
                            break;
                        case 'atualizados':
                            produtosFiltrados = produtosFiltrados.filter(p => p.isUpdated);
                            break;
                    }
                    
                    return ordenarProdutos(produtosFiltrados);
                };

                const produtosFiltrados = filtrarProdutos();

                // L√≥gica de pagina√ß√£o
                const indexUltimoProduto = paginaAtual * produtosPorPagina;
                const indexPrimeiroProduto = indexUltimoProduto - produtosPorPagina;
                const produtosPaginados = produtosFiltrados.slice(indexPrimeiroProduto, indexUltimoProduto);
                const totalPaginas = Math.ceil(produtosFiltrados.length / produtosPorPagina);

                // Fun√ß√£o para mudar p√°gina
                const mudarPagina = (numeroPagina) => {
                    setPaginaAtual(numeroPagina);
                };

                // Gerar n√∫meros das p√°ginas
                const gerarNumerosPaginas = () => {
                    const paginas = [];
                    const maxPaginasVisiveis = 5;
                    
                    if (totalPaginas <= maxPaginasVisiveis) {
                        for (let i = 1; i <= totalPaginas; i++) {
                            paginas.push(i);
                        }
                    } else {
                        if (paginaAtual <= 3) {
                            for (let i = 1; i <= 5; i++) {
                                paginas.push(i);
                            }
                        } else if (paginaAtual >= totalPaginas - 2) {
                            for (let i = totalPaginas - 4; i <= totalPaginas; i++) {
                                paginas.push(i);
                            }
                        } else {
                            for (let i = paginaAtual - 2; i <= paginaAtual + 2; i++) {
                                paginas.push(i);
                            }
                        }
                    }
                    
                    return paginas;
                };

                const limparFiltrosImportacao = () => {
                    setProdutos(produtos.map(p => ({ ...p, isNew: false, isUpdated: false })));
                    setUltimaImportacao(null);
                };

                // Fun√ß√£o para exportar CSV
                const exportarParaCSV = () => {
                    const produtosParaExportar = produtosFiltrados.length > 0 ? produtosFiltrados : produtos;
                    
                    const headers = ['Nome do Produto', 'Categoria', 'Quantidade', 'Unidade', 'M√≠nimo', 'Ideal', 'Status'];
                    
                    const csvData = produtosParaExportar.map(produto => {
                        const status = obterStatusDetalhado(produto);
                        return [
                            `"${produto.nome}"`,
                            `"${produto.categoria}"`,
                            produto.quantidade,
                            `"${produto.unidade}"`,
                            produto.minimo,
                            produto.ideal,
                            `"${status.texto}"`
                        ];
                    });
                    
                    const csvContent = [headers, ...csvData]
                        .map(row => row.join(','))
                        .join('\n');
                    
                    const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });
                    const url = URL.createObjectURL(blob);
                    const link = document.createElement('a');
                    link.href = url;
                    link.download = `produtos_${new Date().toISOString().slice(0, 10)}.csv`;
                    link.click();
                    URL.revokeObjectURL(url);
                };

                // Fun√ß√£o para limpar filtros
                const limparFiltros = () => {
                    setTermoBusca('');
                    setFiltroCategoria('todas');
                    setFiltroStatus('todos');
                    setPaginaAtual(1);
                };

                // Processar importa√ß√£o
                const processarImportacao = async (event) => {
                    const file = event.target.files[0];
                    if (!file) return;

                    const reader = new FileReader();
                    reader.onload = (e) => {
                        const text = e.target.result;
                        const lines = text.split('\n');
                        
                        const novosItens = [];
                        const produtosAtualizados = [...produtos];
                        let produtosAtualizadosCount = 0;
                        let produtosNovosCount = 0;
                        
                        for (let i = 0; i < lines.length; i++) {
                            const linha = lines[i].trim();
                            if (!linha) continue;
                            
                            let nomeProduto = '';
                            let quantidade = 0;
                            
                            if (linha.includes(';;;')) {
                                const partes = linha.split(';;;');
                                if (partes.length >= 2) {
                                    nomeProduto = partes[0].replace(/"/g, '').trim();
                                    quantidade = parseFloat(partes[1].replace(/"/g, '').trim()) || 0;
                                }
                            } else if (linha.includes(',')) {
                                const values = linha.split(',').map(v => v.replace(/"/g, '').trim());
                                if (values.length >= 2 && values[0]) {
                                    nomeProduto = values[0];
                                    quantidade = parseFloat(values[1]) || 0;
                                }
                            }
                            
                            if (nomeProduto && nomeProduto.length > 2 && quantidade >= 0) {
                                const produtoExistente = encontrarProdutoExistente(nomeProduto, produtosAtualizados);
                                
                                if (produtoExistente) {
                                    produtoExistente.quantidade = quantidade;
                                    produtoExistente.isUpdated = true;
                                    produtoExistente.isNew = false;
                                    produtosAtualizadosCount++;
                                } else {
                                    novosItens.push({
                                        id: Date.now() + i,
                                        nome: nomeProduto,
                                        categoria: 'Importado',
                                        quantidade: quantidade,
                                        unidade: 'un',
                                        minimo: Math.max(1, Math.floor(quantidade * 0.2)),
                                        ideal: Math.ceil(quantidade * 1.5),
                                        isNew: true,
                                        isUpdated: false
                                    });
                                    produtosNovosCount++;
                                }
                            }
                        }
                        
                        if (produtosAtualizadosCount === 0 && produtosNovosCount === 0) {
                            alert('Nenhum produto v√°lido foi encontrado no arquivo.');
                            return;
                        }
                        
                        setProdutos([...produtosAtualizados, ...novosItens]);
                        
                        setUltimaImportacao({
                            data: new Date().toLocaleString(),
                            atualizados: produtosAtualizadosCount,
                            novos: produtosNovosCount,
                            produtosNovos: novosItens.map(p => ({ id: p.id, nome: p.nome })),
                            produtosAtualizados: produtosAtualizados.filter(p => p.isUpdated).map(p => ({ id: p.id, nome: p.nome }))
                        });
                        
                        setShowImport(false);
                        event.target.value = '';
                        
                        alert(`Importa√ß√£o conclu√≠da!\n‚Ä¢ ${produtosAtualizadosCount} produtos atualizados\n‚Ä¢ ${produtosNovosCount} produtos adicionados`);
                    };
                    reader.readAsText(file);
                };

                const handleDrop = (e) => {
                    e.preventDefault();
                    setDragActive(false);
                    
                    const files = e.dataTransfer.files;
                    if (files.length > 0) {
                        const event = { target: { files: files } };
                        processarImportacao(event);
                    }
                };

                const handleDragOver = (e) => {
                    e.preventDefault();
                    setDragActive(true);
                };

                const handleDragLeave = (e) => {
                    e.preventDefault();
                    setDragActive(false);
                };

                const adicionarProdutoManual = () => {
                    const novoProduto = {
                        id: Date.now(),
                        nome: 'Novo Produto',
                        categoria: 'Geral',
                        quantidade: 0,
                        unidade: 'un',
                        minimo: 1,
                        ideal: 10,
                        isNew: false,
                        isUpdated: false
                    };
                    setProdutos([...produtos, novoProduto]);
                };

                const removerProduto = (id) => {
                    setProdutos(produtos.filter(p => p.id !== id));
                };

                const atualizarProduto = (id, campo, valor) => {
                    setProdutos(produtos.map(p => 
                        p.id === id ? { ...p, [campo]: valor } : p
                    ));
                };

                const abrirModalProduto = (produto) => {
                    setSelectedProduct(produto);
                    setShowProductModal(true);
                };

                const fecharModalProduto = () => {
                    setSelectedProduct(null);
                    setShowProductModal(false);
                };

                // Fun√ß√£o para truncar texto
                const truncarTexto = (texto, limite = 30) => {
                    if (texto.length <= limite) return texto;
                    return texto.substring(0, limite) + '...';
                };

                return React.createElement('div', { className: "min-h-screen bg-gray-50 p-6" },
                    React.createElement('div', { className: "max-w-7xl mx-auto" },
                        React.createElement('div', { className: "bg-white rounded-lg shadow-lg p-6 mb-6" },
                            React.createElement('div', { className: "flex items-center justify-between mb-6" },
                                React.createElement('div', { className: "flex items-center gap-3" },
                                    React.createElement(Icon, { type: "package", className: "icon-lg text-blue-600" }),
                                    React.createElement('h1', { className: "text-2xl font-bold text-gray-800" }, "Sistema de Gest√£o de Produtos")
                                ),
                                React.createElement('div', { className: "flex gap-3" },
                                    React.createElement('button', {
                                        onClick: adicionarProdutoManual,
                                        className: "flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors"
                                    },
                                        React.createElement(Icon, { type: "plus" }),
                                        "Adicionar Produto"
                                    ),
                                    React.createElement('button', {
                                        onClick: () => setShowImport(true),
                                        className: "flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors"
                                    },
                                        React.createElement(Icon, { type: "upload" }),
                                        "Importar Arquivo"
                                    ),
                                    ultimaImportacao && React.createElement('button', {
                                        onClick: () => setShowImportHistory(true),
                                        className: "flex items-center gap-2 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors"
                                    },
                                        React.createElement(Icon, { type: "history" }),
                                        "Hist√≥rico"
                                    ),
                                    React.createElement('button', {
                                        onClick: exportarParaCSV,
                                        className: "flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors"
                                    },
                                        React.createElement(Icon, { type: "download" }),
                                        "Exportar CSV"
                                    )
                                )
                            ),

                            // Estat√≠sticas
                            React.createElement('div', { className: "grid grid-cols-1 md:grid-cols-4 gap-4 mb-6" },
                                React.createElement('div', { className: "bg-blue-50 p-4 rounded-lg" },
                                    React.createElement('div', { className: "text-blue-600 text-sm font-medium" }, "Total de Produtos"),
                                    React.createElement('div', { className: "text-2xl font-bold text-blue-700" }, produtos.length)
                                ),
                                React.createElement('div', { className: "bg-green-50 p-4 rounded-lg" },
                                    React.createElement('div', { className: "text-green-600 text-sm font-medium" }, "Estoque Ideal"),
                                    React.createElement('div', { className: "text-2xl font-bold text-green-700" }, 
                                        produtos.filter(p => p.quantidade >= p.ideal).length
                                    )
                                ),
                                React.createElement('div', { className: "bg-yellow-50 p-4 rounded-lg" },
                                    React.createElement('div', { className: "text-yellow-600 text-sm font-medium" }, "Estoque Baixo"),
                                    React.createElement('div', { className: "text-2xl font-bold text-yellow-700" }, 
                                        produtos.filter(p => p.quantidade > p.minimo && p.quantidade < p.ideal).length
                                    )
                                ),
                                React.createElement('div', { className: "bg-red-50 p-4 rounded-lg" },
                                    React.createElement('div', { className: "text-red-600 text-sm font-medium" }, "Estoque Cr√≠tico"),
                                    React.createElement('div', { className: "text-2xl font-bold text-red-700" }, 
                                        produtos.filter(p => p.quantidade <= p.minimo).length
                                    )
                                )
                            ),

                            // Busca e Filtros
                            React.createElement('div', { className: "bg-gray-50 p-4 rounded-lg mb-6 space-y-4" },
                                React.createElement('div', { className: "flex items-center gap-4" },
                                    React.createElement('div', { className: "flex items-center gap-2 flex-1" },
                                        React.createElement(Icon, { type: "search", className: "text-gray-600" }),
                                        React.createElement('input', {
                                            type: "text",
                                            placeholder: "Buscar produtos por nome ou categoria...",
                                            value: termoBusca,
                                            onChange: (e) => {
                                                setTermoBusca(e.target.value);
                                                setPaginaAtual(1);
                                            },
                                            className: "flex-1 px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                        }),
                                        (termoBusca || filtroCategoria !== 'todas' || filtroStatus !== 'todos') && React.createElement('button', {
                                            onClick: limparFiltros,
                                            className: "px-3 py-2 bg-gray-200 text-gray-700 rounded-md hover:bg-gray-300 transition-colors"
                                        }, "Limpar")
                                    )
                                ),
                                
                                React.createElement('div', { className: "flex flex-wrap items-center gap-4" },
                                    React.createElement('div', { className: "flex items-center gap-2" },
                                        React.createElement(Icon, { type: "filter", className: "text-gray-600" }),
                                        React.createElement('label', { className: "text-sm font-medium text-gray-700" }, "Categoria:")
                                    ),
                                    React.createElement('select', {
                                        value: filtroCategoria,
                                        onChange: (e) => {
                                            setFiltroCategoria(e.target.value);
                                            setPaginaAtual(1);
                                        },
                                        className: "px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                    },
                                        React.createElement('option', { value: "todas" }, "Todas as Categorias"),
                                        obterCategorias().map(categoria => 
                                            React.createElement('option', { key: categoria, value: categoria }, 
                                                `${categoria} (${produtos.filter(p => p.categoria === categoria).length})`
                                            )
                                        )
                                    ),
                                    
                                    React.createElement('div', { className: "flex items-center gap-2" },
                                        React.createElement('label', { className: "text-sm font-medium text-gray-700" }, "Status:")
                                    ),
                                    React.createElement('select', {
                                        value: filtroStatus,
                                        onChange: (e) => {
                                            setFiltroStatus(e.target.value);
                                            setPaginaAtual(1);
                                        },
                                        className: "px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                    },
                                        React.createElement('option', { value: "todos" }, `Todos os Status (${produtos.length})`),
                                        React.createElement('option', { value: "critico" }, `Estoque Cr√≠tico (${produtos.filter(p => obterStatusDetalhado(p).categoria === 'critico').length})`),
                                        React.createElement('option', { value: "baixo" }, `Estoque Baixo (${produtos.filter(p => obterStatusDetalhado(p).categoria === 'baixo').length})`),
                                        React.createElement('option', { value: "ideal" }, `Estoque Ideal (${produtos.filter(p => obterStatusDetalhado(p).categoria === 'ideal').length})`),
                                        ultimaImportacao && React.createElement('option', { value: "novos" }, `Produtos Novos (${produtos.filter(p => p.isNew).length})`),
                                        ultimaImportacao && React.createElement('option', { value: "atualizados" }, `Produtos Atualizados (${produtos.filter(p => p.isUpdated).length})`)
                                    ),
                                    
                                    React.createElement('div', { className: "ml-auto text-sm text-gray-600" },
                                        `Mostrando ${indexPrimeiroProduto + 1} a ${Math.min(indexUltimoProduto, produtosFiltrados.length)} de ${produtosFiltrados.length} produtos`,
                                        produtosFiltrados.length !== produtos.length && ` (${produtos.length} total)`
                                    )
                                )
                            ),

                            // Tabela de Produtos
                            React.createElement('div', { className: "bg-white rounded-lg shadow overflow-hidden" },
                                React.createElement('div', { className: "overflow-x-auto max-h-600" },
                                    React.createElement('table', { className: "w-full border-collapse" },
                                        React.createElement('thead', { className: "bg-gray-100 sticky top-0 z-10" },
                                            React.createElement('tr', {},
                                                React.createElement('th', {
                                                    className: "border border-gray-200 p-3 text-left bg-gray-100 cursor-pointer hover:bg-gray-200 transition-colors select-none",
                                                    onClick: () => alternarOrdenacao('nome')
                                                },
                                                    React.createElement('div', { className: "flex items-center justify-between" },
                                                        React.createElement('span', {}, "Produto"),
                                                        React.createElement('span', { className: "text-xs" }, obterIconeOrdenacao('nome'))
                                                    )
                                                ),
                                                React.createElement('th', {
                                                    className: "border border-gray-200 p-3 text-left bg-gray-100 cursor-pointer hover:bg-gray-200 transition-colors select-none",
                                                    onClick: () => alternarOrdenacao('categoria')
                                                },
                                                    React.createElement('div', { className: "flex items-center justify-between" },
                                                        React.createElement('span', {}, "Categoria"),
                                                        React.createElement('span', { className: "text-xs" }, obterIconeOrdenacao('categoria'))
                                                    )
                                                ),
                                                React.createElement('th', {
                                                    className: "border border-gray-200 p-3 text-center bg-gray-100 cursor-pointer hover:bg-gray-200 transition-colors select-none",
                                                    onClick: () => alternarOrdenacao('quantidade')
                                                },
                                                    React.createElement('div', { className: "flex items-center justify-center gap-2" },
                                                        React.createElement('span', {}, "Quantidade"),
                                                        React.createElement('span', { className: "text-xs" }, obterIconeOrdenacao('quantidade'))
                                                    )
                                                ),
                                                React.createElement('th', { className: "border border-gray-200 p-3 text-center bg-gray-100" }, "Unidade"),
                                                React.createElement('th', {
                                                    className: "border border-gray-200 p-3 text-center bg-gray-100 cursor-pointer hover:bg-gray-200 transition-colors select-none",
                                                    onClick: () => alternarOrdenacao('minimo')
                                                },
                                                    React.createElement('div', { className: "flex items-center justify-center gap-2" },
                                                        React.createElement('span', {}, "M√≠nimo"),
                                                        React.createElement('span', { className: "text-xs" }, obterIconeOrdenacao('minimo'))
                                                    )
                                                ),
                                                React.createElement('th', {
                                                    className: "border border-gray-200 p-3 text-center bg-gray-100 cursor-pointer hover:bg-gray-200 transition-colors select-none",
                                                    onClick: () => alternarOrdenacao('ideal')
                                                },
                                                    React.createElement('div', { className: "flex items-center justify-center gap-2" },
                                                        React.createElement('span', {}, "Ideal"),
                                                        React.createElement('span', { className: "text-xs" }, obterIconeOrdenacao('ideal'))
                                                    )
                                                ),
                                                React.createElement('th', { className: "border border-gray-200 p-3 text-center bg-gray-100" }, "Status"),
                                                React.createElement('th', { className: "border border-gray-200 p-3 text-center bg-gray-100" }, "A√ß√µes")
                                            )
                                        ),
                                        React.createElement('tbody', {},
                                            produtosPaginados.map(produto => 
                                                React.createElement('tr', {
                                                    key: produto.id,
                                                    className: `hover:bg-gray-50 ${produto.isNew ? 'bg-green-50' : produto.isUpdated ? 'bg-blue-50' : ''}`
                                                },
                                                    React.createElement('td', { className: "border border-gray-200 p-3" },
                                                        React.createElement('div', { className: "flex items-center gap-2" },
                                                            React.createElement('span', {
                                                                className: "flex-1 cursor-pointer hover:text-blue-600 transition-colors",
                                                                title: produto.nome,
                                                                onClick: () => abrirModalProduto(produto)
                                                            }, truncarTexto(produto.nome, 40)),
                                                            React.createElement('div', { className: "flex items-center gap-1" },
                                                                produto.isNew && React.createElement('span', { className: "px-2 py-1 bg-green-100 text-green-800 text-xs rounded-full" }, "NOVO"),
                                                                produto.isUpdated && React.createElement('span', { className: "px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded-full" }, "ATUALIZADO"),
                                                                React.createElement('button', {
                                                                    onClick: () => abrirModalProduto(produto),
                                                                    className: "text-blue-500 hover:text-blue-700 transition-colors",
                                                                    title: "Ver detalhes completos"
                                                                }, React.createElement(Icon, { type: "eye" }))
                                                            )
                                                        )
                                                    ),
                                                    React.createElement('td', { className: "border border-gray-200 p-3" },
                                                        React.createElement('input', {
                                                            type: "text",
                                                            value: produto.categoria,
                                                            onChange: (e) => atualizarProduto(produto.id, 'categoria', e.target.value),
                                                            className: "w-full bg-transparent border-none focus:outline-none"
                                                        })
                                                    ),
                                                    React.createElement('td', { className: "border border-gray-200 p-3 text-center" },
                                                        React.createElement('input', {
                                                            type: "number",
                                                            value: produto.quantidade,
                                                            onChange: (e) => atualizarProduto(produto.id, 'quantidade', parseFloat(e.target.value) || 0),
                                                            className: "w-20 text-center bg-transparent border-none focus:outline-none"
                                                        })
                                                    ),
                                                    React.createElement('td', { className: "border border-gray-200 p-3 text-center" },
                                                        React.createElement('input', {
                                                            type: "text",
                                                            value: produto.unidade,
                                                            onChange: (e) => atualizarProduto(produto.id, 'unidade', e.target.value),
                                                            className: "w-16 text-center bg-transparent border-none focus:outline-none"
                                                        })
                                                    ),
                                                    React.createElement('td', { className: "border border-gray-200 p-3 text-center" },
                                                        React.createElement('input', {
                                                            type: "number",
                                                            value: produto.minimo,
                                                            onChange: (e) => atualizarProduto(produto.id, 'minimo', parseFloat(e.target.value) || 0),
                                                            className: "w-20 text-center bg-transparent border-none focus:outline-none"
                                                        })
                                                    ),
                                                    React.createElement('td', { className: "border border-gray-200 p-3 text-center" },
                                                        React.createElement('input', {
                                                            type: "number",
                                                            value: produto.ideal,
                                                            onChange: (e) => atualizarProduto(produto.id, 'ideal', parseFloat(e.target.value) || 0),
                                                            className: "w-20 text-center bg-transparent border-none focus:outline-none"
                                                        })
                                                    ),
                                                    React.createElement('td', { className: "border border-gray-200 p-3 text-center" },
                                                        React.createElement('div', { className: "flex items-center justify-center gap-1" },
                                                            (() => {
                                                                const status = obterStatusDetalhado(produto);
                                                                return React.createElement('div', { className: "flex flex-col items-center" },
                                                                    React.createElement('div', { className: status.cor },
                                                                        status.categoria === 'critico' && React.createElement(Icon, { type: "alert" }),
                                                                        status.categoria === 'baixo' && React.createElement(Icon, { type: "alert" }),
                                                                        status.categoria === 'ideal' && React.createElement(Icon, { type: "check" })
                                                                    ),
                                                                    React.createElement('span', { className: `text-sm ${status.cor}` }, status.texto),
                                                                    React.createElement('span', { className: "text-xs text-gray-400", title: status.debug }, status.debug)
                                                                );
                                                            })()
                                                        )
                                                    ),
                                                    React.createElement('td', { className: "border border-gray-200 p-3 text-center" },
                                                        React.createElement('button', {
                                                            onClick: () => removerProduto(produto.id),
                                                            className: "text-red-500 hover:text-red-700 transition-colors"
                                                        }, React.createElement(Icon, { type: "trash" }))
                                                    )
                                                )
                                            )
                                        )
                                    )
                                ),
                                
                                // Controles de Pagina√ß√£o
                                totalPaginas > 1 && React.createElement('div', { className: "bg-gray-50 px-6 py-4 border-t border-gray-200" },
                                    React.createElement('div', { className: "flex items-center justify-between" },
                                        React.createElement('div', { className: "text-sm text-gray-600" }, `P√°gina ${paginaAtual} de ${totalPaginas}`),
                                        
                                        React.createElement('div', { className: "flex items-center gap-2" },
                                            React.createElement('button', {
                                                onClick: () => mudarPagina(1),
                                                disabled: paginaAtual === 1,
                                                className: `px-3 py-1 rounded-md text-sm ${
                                                    paginaAtual === 1 
                                                        ? 'bg-gray-200 text-gray-400 cursor-not-allowed' 
                                                        : 'bg-white text-gray-700 hover:bg-gray-100 border border-gray-300'
                                                }`
                                            }, "¬´¬´"),
                                            
                                            React.createElement('button', {
                                                onClick: () => mudarPagina(paginaAtual - 1),
                                                disabled: paginaAtual === 1,
                                                className: `px-3 py-1 rounded-md text-sm ${
                                                    paginaAtual === 1 
                                                        ? 'bg-gray-200 text-gray-400 cursor-not-allowed' 
                                                        : 'bg-white text-gray-700 hover:bg-gray-100 border border-gray-300'
                                                }`
                                            }, "¬´"),
                                            
                                            gerarNumerosPaginas().map(numero => 
                                                React.createElement('button', {
                                                    key: numero,
                                                    onClick: () => mudarPagina(numero),
                                                    className: `px-3 py-1 rounded-md text-sm ${
                                                        paginaAtual === numero
                                                            ? 'bg-blue-600 text-white'
                                                            : 'bg-white text-gray-700 hover:bg-gray-100 border border-gray-300'
                                                    }`
                                                }, numero)
                                            ),
                                            
                                            React.createElement('button', {
                                                onClick: () => mudarPagina(paginaAtual + 1),
                                                disabled: paginaAtual === totalPaginas,
                                                className: `px-3 py-1 rounded-md text-sm ${
                                                    paginaAtual === totalPaginas 
                                                        ? 'bg-gray-200 text-gray-400 cursor-not-allowed' 
                                                        : 'bg-white text-gray-700 hover:bg-gray-100 border border-gray-300'
                                                }`
                                            }, "¬ª"),
                                            
                                            React.createElement('button', {
                                                onClick: () => mudarPagina(totalPaginas),
                                                disabled: paginaAtual === totalPaginas,
                                                className: `px-3 py-1 rounded-md text-sm ${
                                                    paginaAtual === totalPaginas 
                                                        ? 'bg-gray-200 text-gray-400 cursor-not-allowed' 
                                                        : 'bg-white text-gray-700 hover:bg-gray-100 border border-gray-300'
                                                }`
                                            }, "¬ª¬ª")
                                        ),
                                        
                                        React.createElement('div', { className: "text-sm text-gray-600" }, 
                                            `${produtosPaginados.length} de ${produtosFiltrados.length} produtos`
                                        )
                                    )
                                )
                            )
                        ),

                        // Modal de Importa√ß√£o
                        showImport && React.createElement('div', { className: "fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50" },
                            React.createElement('div', { className: "bg-white rounded-lg p-6 max-w-md w-full m-4" },
                                React.createElement('h2', { className: "text-xl font-bold mb-4" }, "Importar Produtos"),
                                
                                React.createElement('div', { className: "mb-4" },
                                    React.createElement('label', { className: "block text-sm font-medium text-gray-700 mb-2" }, "Tipo de Importa√ß√£o"),
                                    React.createElement('select', {
                                        value: importType,
                                        onChange: (e) => setImportType(e.target.value),
                                        className: "w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500"
                                    },
                                        React.createElement('option', { value: "quantidade" }, "Apenas Quantidades"),
                                        React.createElement('option', { value: "completo" }, "Dados Completos")
                                    )
                                ),

                                React.createElement('div', {
                                    className: `border-2 border-dashed rounded-lg p-6 text-center mb-4 transition-colors ${
                                        dragActive ? 'border-blue-500 bg-blue-50' : 'border-gray-300'
                                    }`,
                                    onDrop: handleDrop,
                                    onDragOver: handleDragOver,
                                    onDragLeave: handleDragLeave
                                },
                                    React.createElement(Icon, { type: "file", className: "text-gray-400 mx-auto mb-2", style: { fontSize: '48px' } }),
                                    React.createElement('p', { className: "text-gray-600 mb-2" }, "Arraste e solte um arquivo ou clique para selecionar"),
                                    React.createElement('input', {
                                        ref: fileInputRef,
                                        type: "file",
                                        accept: ".csv,.txt",
                                        onChange: processarImportacao,
                                        className: "hidden",
                                        id: "fileInput"
                                    }),
                                    React.createElement('label', {
                                        htmlFor: "fileInput",
                                        className: "inline-block px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors cursor-pointer"
                                    }, "Selecionar Arquivo")
                                ),

                                React.createElement('div', { className: "text-sm text-gray-600 mb-4" },
                                    React.createElement('p', {}, React.createElement('strong', {}, "Formatos suportados:")),
                                    React.createElement('ul', { className: "list-disc list-inside mt-1 space-y-1" },
                                        React.createElement('li', {}, React.createElement('strong', {}, "CSV/TXT:"), " produto;;;quantidade"),
                                        React.createElement('li', {}, React.createElement('strong', {}, "CSV tradicional:"), " nome,quantidade")
                                    ),
                                    React.createElement('p', { className: "mt-2 text-xs text-gray-500" },
                                        React.createElement('strong', {}, "Exemplo:"), " ABRACADEIRA 100MM;;;15"
                                    )
                                ),

                                React.createElement('div', { className: "flex gap-3" },
                                    React.createElement('button', {
                                        onClick: () => setShowImport(false),
                                        className: "flex-1 px-4 py-2 border border-gray-300 rounded-md hover:bg-gray-50 transition-colors"
                                    }, "Cancelar")
                                )
                            )
                        )
                    )
                );
            };

            // Renderizar o componente
            const root = createRoot(document.getElementById('root'));
            root.render(React.createElement(SistemaImportacaoProdutos));
        });
    </script>
</body>
</html>